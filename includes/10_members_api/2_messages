<h2 id="members-messages"><a name="v3-members-messages"></a> Members Messages</h2>

<h3 id="introduction"><a name="v3-member-messages-introduction"> Introduction</h3>

<h4 id="membermessage-model"><a name="v3-member-message-model"></a> MemberMessage model</h4>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MTE0NTc1Mg"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-08-05T05:38:12"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You have just received 9 points."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Required?</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Message ID</td>
<td>yes</td>
<td>string</td>
</tr>
<tr>
<td>type</td>
<td>Object with member&rsquo;s properties</td>
<td>yes</td>
<td>enum: [&ldquo;sms&rdquo;, &ldquo;email&rdquo;, &ldquo;push&rdquo;]</td>
</tr>
<tr>
<td>created_at</td>
<td>Time when the message has been sent</td>
<td>yes</td>
<td>string</td>
</tr>
<tr>
<td>content</td>
<td></td>
<td>yes</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="list-messages"><a name="v3-members-messages-list"></a> List messages</h3>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/509134/messages"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns object containing <a href="#v3-member-message-model">member messages</a> and <a href="#v3-pagination-model">pagination_info</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">List</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">members</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">See</span><span class="p">:</span><span class="w"> </span><span class="s2">"Member message"</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Pagination</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="s2">"Pagination info"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:member_id/messages</code></p>

<p>Returns messages sent to given Member from our system, after merging properties and shortening urls so this is the content Member received. 
Does not translate id to other identifiers and vice versa. If no messages are found, returns an empty <code class="prettyprint">messages</code> array. </p>

<p><strong>Messages are removed when Member is deleted.</strong></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required?</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>member_id</td>
<td>Member ID</td>
<td>yes</td>
<td>integer</td>
</tr>
<tr>
<td>per_page</td>
<td>Number of results to be returned per request</td>
<td>no</td>
<td>integer</td>
</tr>
<tr>
<td>page_no</td>
<td>Number of results page</td>
<td>no</td>
<td>integer</td>
</tr>
</tbody></table>

<h4 id="response-json-object">Response (JSON object)</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>messages</td>
<td>Array<MemberMessage></td>
<td>Array of <a href="#v3-member-message-model">MemberMessages</a></td>
</tr>
<tr>
<td>pagination_info</td>
<td>Pagination</td>
<td><a href="#v3-pagination-model">Pagination</a> object</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:MessagesHistory:List</code> permit
</aside>

<!--- ############################################################################################################# --->

<h3 id="get-message"><a name="v3-members-message-get"></a> Get message</h3>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/509134/messages/MTE0NTc1Mg"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns <a href="#v3-member-message-model">member message</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">MemberMessage</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">See</span><span class="p">:</span><span class="w"> </span><span class="s2">"MemberMessage model"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:member_id/messages/:id</code></p>

<p>Returns specific message sent to member.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required?</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>member_id</td>
<td>Member ID</td>
<td>yes</td>
<td>integer</td>
</tr>
<tr>
<td>id</td>
<td>Message ID</td>
<td>yes</td>
<td>string</td>
</tr>
</tbody></table>

<h4 id="response-json-object">Response (JSON object)</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>MemberMessage</td>
<td><a href="#v3-member-message-model">MemberMessage</a></td>
</tr>
</tbody></table>

<h4 id="error-responses">Error responses</h4>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Message not found</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:MessagesHistory:Get</code> permit
</aside>

<!--- ############################################################################################################# --->
