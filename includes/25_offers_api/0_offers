<h1 id='a-name-offers-api-a-offers-api-1'><span id=a-name-offers-api-a-offers-api></span><a name="offers-api"></a> Offers API</h1>
<p>This section describes endpoints destined for end user (e.g. for mobile apps) that work only within context of (signed in) member.
Navigate to <a href="#offers-admin">Offers Admin</a> section to see docs for offers management endpoints.</p>
<h2 id='introduction-1'><span id=introduction></span>Introduction</h2><h3 id='member-context-1'><span id=member-context></span>Member context</h3>
<p>Offers API supports two distinct approaches to work with context of member.</p>
<h4 id='a-name-offers-oauth-context-a-member-id-oauth-recommended-1'><span id=a-name-offers-oauth-context-a-member-id-oauth-recommended></span><a name="offers-oauth-context"></a> Member ID OAuth (recommended)</h4>
<p>In the first one member context is resolved from MPC <a href="#oauth2">OAuth</a> member session.</p>

<p>This setup requires use of endpoints that have <code>/me/</code> URL segment and requires token provided with <code>authorization</code> header.</p>
<h4 id='a-name-offers-member-id-context-a-member-id-1'><span id=a-name-offers-member-id-context-a-member-id></span><a name="offers-member-id-context"></a> Member ID</h4>
<p>In this approach member context is resolved from Member&#39;s ID provided within URL.</p>

<p>This setup requires use of endpoints that have <code>/:member_id/</code> URL segment and requires no authentication.</p>

<p>This approach is designed for implementations in which member is authenticated by your system and 
<strong>should not be used on front-end implementations</strong>, where API token is exposed to an end user. </p>
<h4 id='a-name-offers-guest-access-a-guest-access-1'><span id=a-name-offers-guest-access-a-guest-access></span><a name="offers-guest-access"></a> Guest access</h4>
<p>Some API client implementations may need to present content to a non-authenticated user.</p>

<p>In order to allow this, static endpoints (like offers list) may work without member context.</p>

<p>They exist in versions which use <code>/guest/</code> URL segment instead of <code>/me/</code> or <code>/member_id/</code> and may be used by both
aforementioned approaches.</p>
<h3 id='a-name-offer-model-a-offer-model-1'><span id=a-name-offer-model-a-offer-model></span><a name="offer-model"></a> Offer model</h3>
<blockquote>
<p>Offer example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000115</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Buy two shoes, get one jacket"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REGULAR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"external_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/foo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usable_since"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-13T17:32:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usable_until"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"collection_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000016</span><span class="p">,</span><span class="w"> </span><span class="mi">1000017</span><span class="p">],</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"2 + 1"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"stores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"M&amp;H"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000115-offer_default-original.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offer_default"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"read_more"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"button_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button title"</span><span class="p">,</span><span class="w"> </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w"> </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"activation_texts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"modal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Modal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"button"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"list"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.name"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.stores"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"empty"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inline"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some great offer we have here!"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"liked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_uses"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uses_left"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active_until"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-13T18:41:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"period"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"extras"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>enum: [&#39;REGULAR&#39;, &#39;EXCLUSIVE&#39;, &#39;BIRTHDAY&#39;, &#39;WELCOME&#39;]</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>external_url</td>
<td>string</td>
<td>yes</td>
<td>The URL the offer may be linked with</td>
</tr>
<tr>
<td>usable_since</td>
<td>Date</td>
<td>yes</td>
<td>Time since the offer may be used. If null, there is no restriction.</td>
</tr>
<tr>
<td>usable_until</td>
<td>Date</td>
<td>yes</td>
<td>Time until the offer may be used. If null, there is no restriction.</td>
</tr>
<tr>
<td>collection_ids</td>
<td>integer[]</td>
<td>no (may be empty)</td>
<td>List of collections ids the offer belongs to</td>
</tr>
<tr>
<td>tags</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of tags identifiers associated with the offer. Information from <a href="#list-translations">Translations &gt; List</a> should be used to display the tags.</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of shop names associated with the offer</td>
</tr>
<tr>
<td>files</td>
<td>File[]</td>
<td>no</td>
<td>A list of offer files - see <a href="#file-model">File model</a></td>
</tr>
<tr>
<td>liked</td>
<td>Boolean</td>
<td>no</td>
<td>Has offer been liked by user?</td>
</tr>
<tr>
<td>usage</td>
<td>Usage</td>
<td>no</td>
<td>Usage information object - see <a href="#offer-usage-model">Offer usage model</a></td>
</tr>
<tr>
<td>extras</td>
<td>Object</td>
<td>no (may be empty)</td>
<td>Extendable container for any potential extra data</td>
</tr>
<tr>
<td>display</td>
<td>Object</td>
<td>no</td>
<td>Stores display information</td>
</tr>
<tr>
<td>display.schemas</td>
<td>Object</td>
<td>no</td>
<td>Offer displays schemas - see <a href="#offers-display-schemas">Offer display schemas</a></td>
</tr>
<tr>
<td>display.read_more</td>
<td>Object</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.button_title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.url</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.text</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more</td>
<td>Object</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>activation_texts.modal</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>activation_texts.button</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>activation_texts.description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
</tbody></table>
<h3 id='a-name-offer-usage-model-a-offer-usage-model-1'><span id=a-name-offer-usage-model-a-offer-usage-model></span><a name="offer-usage-model"></a> Offer usage model</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usable</td>
<td>Boolean</td>
<td>no</td>
<td>Is the offer usable?</td>
</tr>
<tr>
<td>max_uses</td>
<td>integer</td>
<td>yes</td>
<td>Maximum number of times the specific member can use the offer. When null, there&#39;s no limit.</td>
</tr>
<tr>
<td>uses_left</td>
<td>integer</td>
<td>yes</td>
<td>How many more times the specific member can use the offer - this number can be also affected by global offer limit. When null, there&#39;s no limit.</td>
</tr>
<tr>
<td>active_until</td>
<td>Date</td>
<td>yes</td>
<td>The last time time the offer has been used at+ activation time (configurable per Loyalty Club, e.x. 30s). When null, the offer has not been activated (used) yet</td>
</tr>
<tr>
<td>period</td>
<td>Object</td>
<td>yes</td>
<td>If present, it describes limtations of using the offer by member within specific period</td>
</tr>
<tr>
<td>period.timespan</td>
<td>enum: [&#39;MINUTE&#39;, &#39;HOUR&#39;, &#39;DAY&#39;, &#39;WEEK&#39;, &#39;MONTH&#39;, &#39;YEAR&#39;]</td>
<td>no</td>
<td>Defines the period in which usage is limited</td>
</tr>
<tr>
<td>period.max_uses</td>
<td>integer</td>
<td>no</td>
<td>Defines how many times the offer may be used by member within period</td>
</tr>
<tr>
<td>period.uses_left</td>
<td>integer</td>
<td>yes</td>
<td>Defines how many times member may use the offer until end of current period</td>
</tr>
</tbody></table>
<h3 id='a-name-offers-collection-model-a-collection-model-1'><span id=a-name-offers-collection-model-a-collection-model></span><a name="offers-collection-model"></a> Collection model</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>short_description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>offers_order</td>
<td>integer[]</td>
<td>no (may be empty)</td>
<td>Describes order in which offers should be displayed inside this collection</td>
</tr>
<tr>
<td>files</td>
<td>File[]</td>
<td>no</td>
<td>A list of Offer Files - see <a href="#file-model">File model</a></td>
</tr>
</tbody></table>
<h3 id='a-name-offers-display-schemas-a-display-schemas-1'><span id=a-name-offers-display-schemas-a-display-schemas></span><a name="offers-display-schemas"></a> Display schemas</h3>
<blockquote>
<p>Example schemas:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w">
</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"list"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.name"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.stores"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"empty"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inline"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some great offer we have here!"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w">
</span></code></pre>
<p>Display schemas are the offer attributes that describe how offer is meant to be displayed inside specific 
context - and there are two types of schemas:</p>

<ul>
<li><code>list</code> - describes how offer should look in an offers list view</li>
<li><code>details</code> - describes how offer should look in an offer detail view</li>
</ul>

<p>Each schema consists of fields with definitions of content that should be put inside the field - there are three of them:</p>

<ul>
<li><code>header</code></li>
<li><code>body</code></li>
<li><code>caption</code></li>
</ul>

<p>The fields interpretation (how they are utilized by view) is up to API client design and/or specific Loyalty Club standard.</p>

<p>Fields are described by two attributes: <code>type</code> and <code>value</code>. 
There are three types of fields:</p>

<ul>
<li><code>&quot;reference&quot;</code> - some offer attribute should be used for the field content, <code>value</code> contains <a href="https://support.smartbear.com/readyapi/docs/testing/jsonpath-reference.html">JSONPath</a> reference to element, e.g. <code>$.name</code><br></li>
<li><code>&quot;inline&quot;</code> - the field itself contains content that should be placed inside the field, which is stored in the <code>value</code> attribute</li>
<li><code>&quot;empty&quot;</code> - the field should not be displayed at all</li>
</ul>

<p>By default (when no schema is defined on offer by it&#39;s creator), all of the schema fields are references to:</p>

<ul>
<li><code>caption</code> =&gt; <code>stores</code></li>
<li><code>header</code> =&gt; <code>name</code></li>
<li><code>body</code> =&gt; <code>description</code></li>
</ul>
<h2 id='a-name-offers-a-offers-1'><span id=a-name-offers-a-offers></span><a name="offers"></a> Offers</h2><h3 id='a-name-offers-meta-a-get-offers-meta-1'><span id=a-name-offers-meta-a-get-offers-meta></span><a name="offers-meta"></a> Get offers meta</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/members/me/offers/meta"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"-50%"</span><span class="p">,</span><span class="w"> </span><span class="s2">"great deal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2 + 1"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"stores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"M&amp;H"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Doo Doo"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"collections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000016</span><span class="p">,</span><span class="w">
            </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection #1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"short_title"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"offers_order"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000115</span><span class="p">,</span><span class="w"> </span><span class="mi">1000112</span><span class="p">,</span><span class="w"> </span><span class="mi">1000114</span><span class="p">],</span><span class="w">
            </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/collection-1000016-collection_cover_default-original.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection_cover_default"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/collection-1000016-collection_cover_default-thumbnail.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection_cover_default"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/collection-1000016-collection_cover_default-base.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection_cover_default"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"activated_seconds_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/me/offers/meta</code> [<a href="#oauth2">OAuth</a>]</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:GetMeta</code> permit
</aside>

<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/:member_id/offers/meta</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:GetMetaByMemberId</code> permit
</aside>

<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/guest/offers/meta</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:GetMetaPreview</code> permit
</aside>

<p>Returns offers metadata which consists of:</p>

<ul>
<li>aggregated lists of records currently associated with offers (stores, tags, collections)</li>
<li>Loyalty Club configuration</li>
</ul>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tags</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of unique tags assigned to offers</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of unique stores assigned to offers</td>
</tr>
<tr>
<td>collections</td>
<td>Collection[]</td>
<td>no (may be empty)</td>
<td>List of unique collections assigned to offers - see <a href="#offers-collection-model">Collection model</a></td>
</tr>
<tr>
<td>activated_seconds_time</td>
<td>integer</td>
<td>no</td>
<td>Number of seconds the offers stays active after member uses it</td>
</tr>
</tbody></table>
<h3 id='a-name-get-offer-a-get-offer-1'><span id=a-name-get-offer-a-get-offer></span><a name="get-offer"></a> Get offer</h3>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/me/offers/:id</code> [<a href="#oauth2">OAuth</a>]</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Get</code> permit
</aside>

<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/:member_id/offers/:id</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:GetByMemberId</code> permit
</aside>

<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/guest/offers/:id</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:GetPreview</code> permit
</aside>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/members/me/offers/1000016"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an Offer object under &quot;offer&quot; key. See <a href="#offer-model">Offer model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns details of the specified offer.</p>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td>Offer</td>
<td>no</td>
<td>See <a href="#offer-model">Offer model</a></td>
</tr>
</tbody></table>
<h3 id='a-name-list-offers-a-list-offers-1'><span id=a-name-list-offers-a-list-offers></span><a name="list-offers"></a> List offers</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/members/me/offers"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a list of offers and pagination info. 
  See <a href="#offer-model">Offer model</a> and <a href="#pagination-json-model">Pagination info model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Pagination</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/me/offers</code> [<a href="#oauth2">OAuth</a>]</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:ListVisible</code> permit
</aside>

<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/:member_id/offers</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:ListVisibleByMemberId</code> permit
</aside>

<p><strong>GET</strong> <code>v3/:loyalty_club_slug/members/guest/offers</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:ListVisiblePreview</code> permit
</aside>

<p>Returns offers list.</p>
<h4 id='query-parameters-1'><span id=query-parameters></span>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>100</td>
<td>Number of results to be returned per request (100 is the maximum)</td>
</tr>
<tr>
<td>page_no</td>
<td>integer</td>
<td>1</td>
<td>Number of results page</td>
</tr>
<tr>
<td>include_pagination_info</td>
<td>boolean</td>
<td>false</td>
<td>When true, pagination info (containing info like total records count, next page) will be returned</td>
</tr>
<tr>
<td>order_by</td>
<td>string</td>
<td>&quot;name&quot;</td>
<td>See <a href="#offers-list-order-by"><code>order_by</code> param</a></td>
</tr>
<tr>
<td>collection_ids</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers belonging to least one of given collections will be returned</td>
</tr>
<tr>
<td>tags</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given tags will be returned</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given stores will be returned</td>
</tr>
<tr>
<td>campaign_id</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers with this campaign_id will be returned</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>null</td>
<td>When present, only offers that match the query string will be returned</td>
</tr>
<tr>
<td>usable</td>
<td>boolean</td>
<td>false</td>
<td>When true, only offers that are usable will be returned</td>
</tr>
<tr>
<td>liked</td>
<td>boolean</td>
<td>false</td>
<td>When true, only offers that have been liked by member</td>
</tr>
</tbody></table>

<p>All parameters are optional.</p>
<h5 id='a-name-offers-list-order-by-a-code-order_by-code-param-1'><span id=a-name-offers-list-order-by-a-code-order_by-code-param></span><a name="offers-list-order-by"></a> <code>order_by</code> param</h5>
<p>Offers list may be sorted by <code>order_by</code> param, which has similar syntax as ORDER BY keyword in SQL statements.</p>

<p>For example <code>order_by=usable ASC, created_at DESC</code> will return offers sorted by their usability, then by their creation date.</p>

<p>Following offer attributes may be used for sorting  in general:</p>

<ul>
<li>name</li>
<li>usable_since</li>
<li>usable_until</li>
<li>created_at</li>
</ul>

<p>Only in member context (does not work with <code>/guest/</code> context: </p>

<ul>
<li>usable </li>
<li>uses_left</li>
<li>liked </li>
</ul>

<p>Also, when querying offers by <em>single</em> collection_id, the list may also be sorted by:</p>

<ul>
<li>collection_position</li>
</ul>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>Offer[]</td>
<td>no (may be empty)</td>
<td>See <a href="#offer-model">Offer model</a></td>
</tr>
<tr>
<td>pagination_info</td>
<td>PaginationInfo</td>
<td>yes</td>
<td>See <a href="#pagination-json-model">Pagination info model</a></td>
</tr>
</tbody></table>
<h3 id='a-name-use-offer-a-use-offer-1'><span id=a-name-use-offer-a-use-offer></span><a name="use-offer"></a> Use offer</h3><pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/members/me/offers/1000016"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
    {
      "authorization_token": "a1cc4e0b3ab54b7d8"
    }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a Offer usage object - See <a href="#offer-usage-model">Offer usage model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_uses"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="s2">"uses_left"</span><span class="p">:</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w">
        </span><span class="s2">"active_until"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-08T14:47:22.323Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/members/me/offers/:id/use</code> [<a href="#oauth2">OAuth</a>]</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Use</code> permit
</aside>

<p><strong>POST</strong> <code>v3/:loyalty_club_slug/members/:member_id/offers/:id/use</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:UseByMemberId</code> permit
</aside>

<p>Uses (activates) the offer by member.</p>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authorization_token</td>
<td>string</td>
<td>yes</td>
<td>See <a href="#offer-use-authorization">below</a></td>
</tr>
</tbody></table>
<h5 id='a-name-offer-use-authorization-a-offer-use-authorization-1'><span id=a-name-offer-use-authorization-a-offer-use-authorization></span><a name="offer-use-authorization"></a> Offer use authorization</h5>
<p>Some features (like Rewards Program) may require from member to provide some code (scanned QR code, for example), so we can register
his physical presence in the store.</p>

<p>When token is not provided, the offer use is processed as usual, except that some benefits (like Rewards points)
tied to it may not be granted to the member.</p>

<p>However, when token is provided and happens to be invalid, the offer use is not registered, and 422 error (see below) is returned.  </p>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usage</td>
<td>OfferUsage</td>
<td>See <a href="#offer-usage-model">Offer usage model</a></td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>404</code></td>
<td><code>{&quot;error&quot;: &quot;Offer#10000951 not found&quot;}</code></td>
<td>-</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Already active&quot;}</code></td>
<td>The offer has been just used</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Not granted&quot;}</code></td>
<td>The offer is not available to  member</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Usage authorization token invalid&quot;}</code></td>
<td>Provided usage token is invalid</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;User limit exceeded&quot;}</code></td>
<td>Member exhausted his pool of uses</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Periodic user limit exceeded&quot;}</code></td>
<td>Member exhausted his pool of uses within current time period</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Global limit exceeded&quot;}</code></td>
<td>There are no more offers available globally (stock is empty)</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Not in usable timeframes&quot;}</code></td>
<td>Offer is not usable yet or anymore</td>
</tr>
<tr>
<td><code>467</code></td>
<td><code>{&quot;error&quot;: &quot;Member is banned!&quot;, &quot;banned_until&quot;: &quot;2137-10-28T17:24:06.207Z&quot;}</code></td>
<td>Member is banned</td>
</tr>
</tbody></table>
<h3 id='a-name-like-offer-a-like-offer-1'><span id=a-name-like-offer-a-like-offer></span><a name="like-offer"></a> Like offer</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/members/me/offers/1000016/like"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code>v3/:loyalty_club_slug/members/me/offers/:id/like</code> [<a href="#oauth2">OAuth</a>]</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Like</code> permit
</aside>

<p><strong>PUT</strong> <code>v3/:loyalty_club_slug/members/:member_id/offers/:id/like</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:LikeByMemberId</code> permit
</aside>

<p>Marks offer as &quot;liked&quot; by user.</p>
<h3 id='a-name-unlike-offer-a-unlike-offer-1'><span id=a-name-unlike-offer-a-unlike-offer></span><a name="unlike-offer"></a> Unlike offer</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/members/me/offers/1000016/unlike"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code>v3/:loyalty_club_slug/members/me/offers/:id/unlike</code> [<a href="#oauth2">OAuth</a>]</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Like</code> permit
</aside>

<p><strong>PUT</strong> <code>v3/:loyalty_club_slug/members/:member_id/offers/:id/unlike</code></p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:LikeByMemberId</code> permit
</aside>

<p>Revers marking offer as &quot;liked&quot; by user.</p>
<h3 id='a-name-grant-offer-a-grant-offer-1'><span id=a-name-grant-offer-a-grant-offer></span><a name="grant-offer"></a> Grant offer</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/members/7371713/offers/10000951/unlike"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/members/:member_id/members/:member_id/offers/:id/grant</code></p>

<p>Some types of offers are not available to members until they are granted to them - this endpoint allows to do this. </p>

<p>It may make sense to grant a same offer to one member multiple times when offer has limited number of uses. 
In such case, each consecutive grant will increase the number of uses for this member.</p>

<p>NOTE: This endpoint does not have <a href="#oauth2">OAuth</a> version </p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:GrantByMemberId</code> permit
</aside>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usable_for_seconds</td>
<td>integer</td>
<td>yes</td>
<td>When present, the granted offer will be available for use by member only for the defined time</td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Not grantable&quot;}</code></td>
<td>The offer has type not eligible for granting</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Global limit exceeded&quot;}</code></td>
<td>The offer has no more uses available</td>
</tr>
<tr>
<td><code>422</code></td>
<td><code>{&quot;error&quot;: &quot;Member not in audience&quot;}</code></td>
<td>The offer has been specify to only be available to members in specific audience and the member does not belong to it</td>
</tr>
<tr>
<td><code>467</code></td>
<td><code>{&quot;error&quot;: &quot;Member is banned!&quot;, &quot;banned_until&quot;: &quot;2137-10-28T17:24:06.207Z&quot;}</code></td>
<td>Member is banned</td>
</tr>
</tbody></table>
