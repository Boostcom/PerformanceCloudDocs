<h2 id='a-name-offers-events-a-offers-events-1'><span id=a-name-offers-events-a-offers-events></span><a name="offers-events"></a> Offers Events</h2><h3 id='a-name-offer-event-model-a-offerevent-model-1'><span id=a-name-offer-event-model-a-offerevent-model></span><a name="offer-event-model"></a> OfferEvent model</h3>
<blockquote>
<p>Offer Event example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"offer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-08-27T10:20:11.810Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collections_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"t1"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"stores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"a"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"search_string"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"utm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campaign-2018-05-01"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer_id</td>
<td>integer</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>created_at</td>
<td>Date</td>
<td>yes</td>
<td>Date of the event occurrence</td>
</tr>
<tr>
<td>context</td>
<td>Object</td>
<td>no</td>
<td>Context of the event occurrence.</td>
</tr>
<tr>
<td>context.collections_ids</td>
<td>Array<ID></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.tags</td>
<td>Array<string></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.stores</td>
<td>Array<string></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.search_string</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.utm</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>Context describes in what circumstances the event has occurred. 
For example, member clicked on a coupon that was displayed inside collection, the context should include this collection_id. </p>
<h3 id='a-name-offers-clicked-a-register-quot-clicked-quot-event-1'><span id=a-name-offers-clicked-a-register-quot-clicked-quot-event></span><a name="offers-clicked"></a> Register &quot;clicked&quot; event</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers/events/offers_clicked"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -d <span class="s1">'
    {
        "events": [
            {
                "offer_id": "14",
                "created_at": "2019-08-27T10:20:11.810Z",
                "context": {
                    "collections_ids": [1, 2],
                    "tags": ["t1"],
                    "stores": ["a"],
                    "search_string": "foo",
                    "utm": "campaign-2018-05-01"
                }
            }
        ]

    }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/members/me/events/offers_clicked</code> [<a href="#oauth2">OAuth</a>]</p>

<p>Registers that OAuth member clicked on given offers.</p>
<h4 id='post-parameters-1'><span id=post-parameters></span>Post Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>events</td>
<td>Array<OfferEvent></td>
<td>See <a href="#offer-event-model">Offer Event</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Events:Clicked</code> permit
</aside>
<h3 id='a-name-offers-seen-a-register-quot-seen-quot-event-1'><span id=a-name-offers-seen-a-register-quot-seen-quot-event></span><a name="offers-seen"></a> Register &quot;seen&quot; event</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers/events/offers_seen"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -H <span class="s1">'authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -d <span class="s1">'
    {
        "events": [
            {
                "offer_id": "14",
                "created_at": "2019-08-27T10:20:11.810Z",
                "context": {
                    "collections_ids": [1, 2],
                    "tags": ["t1"],
                    "stores": ["a"],
                    "search_string": "foo",
                    "utm": "campaign-2018-05-01"
                }
            }
        ]

    }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/members/me/events/offers_seen</code> [<a href="#oauth2">OAuth</a>]</p>

<p>Registers that OAuth member saw given offers.</p>

<aside class="warning">
Seen events are automatically tracked when retrieving offer image/file within member context. Make sure you are not duplicating events!
</aside>
<h4 id='post-parameters-1'><span id=post-parameters></span>Post Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>events</td>
<td>Array <OfferEvent></td>
<td>See <a href="#offer-event-model">Offer Event</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Events:Seen</code> permit
</aside>
