<h2 id='a-name-offer-admin-offers-a-offers-1'><span id=a-name-offer-admin-offers-a-offers></span><a name="offer-admin-offers"></a> Offers</h2><h3 id='a-name-get-offer-a-get-offer-1'><span id=a-name-get-offer-a-get-offer></span><a name="get-offer"></a> Get offer</h3>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/offers/:id</code></p>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers/1000016"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an Offer object under &quot;offer&quot; key. See <a href="#admin-offer-model">Offer model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns details of the specified offer.</p>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td>Offer</td>
<td>no</td>
<td>See <a href="#admin-offer-model">Offer model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Get</code> permit
</aside>
<h3 id='a-name-list-offers-a-list-offers-1'><span id=a-name-list-offers-a-list-offers></span><a name="list-offers"></a> List offers</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a list of offers and pagination info. 
  See <a href="#admin-offer-model">Offer model</a> and <a href="#pagination-json-model">Pagination info model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Pagination</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/offers</code></p>

<p>Returns offers list.</p>
<h4 id='query-parameters-1'><span id=query-parameters></span>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>100</td>
<td>Number of results to be returned per request (100 is the maximum)</td>
</tr>
<tr>
<td>page_no</td>
<td>integer</td>
<td>1</td>
<td>Number of results page</td>
</tr>
<tr>
<td>include_total</td>
<td>boolean</td>
<td>false</td>
<td>When true, detailed pagination info (containing info like total records count, next page) will be returned</td>
</tr>
<tr>
<td>sort_by</td>
<td>string</td>
<td>&quot;name&quot;</td>
<td>What attribute should results be sorted by? Supported attributes are: <code>[&quot;name&quot;, &quot;usable_since&quot;, &quot;usable_until&quot;, &quot;visible_since&quot;, &quot;visible_until&quot;, &quot;created_at&quot;, &quot;updated_at&quot;, &quot;archived_at&quot;]</code></td>
</tr>
<tr>
<td>sort_direction</td>
<td>string</td>
<td>&quot;asc&quot;</td>
<td>Direction of sorting: &quot;asc&quot; or &quot;desc&quot;</td>
</tr>
<tr>
<td>collection_ids</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers belonging to least one of given collections will be returned</td>
</tr>
<tr>
<td>tags</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given tags will be returned</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given stores will be returned</td>
</tr>
<tr>
<td>campaign_id</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers with this campaign_id will be returned</td>
</tr>
<tr>
<td>audience_id</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers with this audience_id will be returned</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>null</td>
<td>When present, only offers that match the query string will be returned</td>
</tr>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers having one of provided IDs will be returned</td>
</tr>
<tr>
<td>without_collection</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without collections will be returned</td>
</tr>
<tr>
<td>without_tag</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without tags will be returned</td>
</tr>
<tr>
<td>without_audience_id</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without audiences will be returned</td>
</tr>
<tr>
<td>without_campaign_id</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without campaigns will be returned</td>
</tr>
<tr>
<td>without_shop</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without stores will be returned</td>
</tr>
<tr>
<td>with_archived</td>
<td>boolean</td>
<td>false</td>
<td>When present, also archived offers will be returned</td>
</tr>
<tr>
<td>only_archived</td>
<td>boolean</td>
<td>false</td>
<td>When present, only archived offers will be returned</td>
</tr>
</tbody></table>

<p>All parameters are optional.</p>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>Offer[]</td>
<td>no (may be empty)</td>
<td>See <a href="#admin-offer-model">Offer model</a></td>
</tr>
<tr>
<td>pagination_info</td>
<td>PaginationInfo</td>
<td>no</td>
<td>See <a href="#pagination-json-model">Pagination info model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:List</code> permit
</aside>
<h3 id='a-name-create-offers-a-create-offers-1'><span id=a-name-create-offers-a-create-offers></span><a name="create-offers"></a> Create offers</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "offers":[
                {
                    "name": "Offer 1"
                },
                {
                    "name": "Offer 2"
                }
            ]
        }
    '</span>
</code></pre>
<blockquote>
<p>Returns object structured like this: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"collection_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"list must contain unique values"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000284</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/offers</code></p>

<p>Creates offer(s) with given lists of attributes (OfferPayloads). </p>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>OfferPayload[]</td>
<td>List of offers to create. See <a href="#admin-offer-payload">Offer payload</a></td>
</tr>
</tbody></table>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>True if any offer has been created</td>
</tr>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>IDs of offers that have been created</td>
</tr>
<tr>
<td>errors</td>
<td>Object</td>
<td>Errors of offers that couldn&#39;t be created</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Create</code> permit
</aside>
<h3 id='a-name-update-offers-a-update-offers-1'><span id=a-name-update-offers-a-update-offers></span><a name="update-offers"></a> Update offers</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "offers":[
                {
                    "id": 1000284,
                    "name": "Offer 1"
                },
                {
                    "id": 1000285,
                    "name": "Offer 2"
                }
            ]
        }
    '</span>
</code></pre>
<blockquote>
<p>Returns object structured like this: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"collection_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"list must contain unique values"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code>v3/:loyalty_club_slug/offers</code></p>

<p>Updates offer(s) with given lists of attributes (OfferPayloads). Also, each payload record must contain offer ID that is meant to be updated.
Update is not partial, so all attributes that aren&#39;t present in the payload will be nullified. </p>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>OfferPayload[]</td>
<td>List of offers to update. See <a href="#admin-offer-payload">Offer payload</a>.</td>
</tr>
</tbody></table>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>True if any offer has been created</td>
</tr>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>IDs of offers that have been created</td>
</tr>
<tr>
<td>errors</td>
<td>Object</td>
<td>Errors of offers that couldn&#39;t be created</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Update</code> permit
</aside>
<h3 id='a-name-clone-offers-a-clone-offers-1'><span id=a-name-clone-offers-a-clone-offers></span><a name="clone-offers"></a> Clone offers</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers/clone"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "ids":[1000284, 1000285]
        }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns IDs of offers that were created by cloning </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000301</span><span class="p">,</span><span class="w"> </span><span class="mi">1000302</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/offers/clone</code></p>

<p>Clones given offers (by their IDs)</p>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>List of offers ids to clone</td>
</tr>
</tbody></table>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>IDs of offers that have been cloned</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Clone</code> permit
</aside>
<h3 id='a-name-grant-offers-a-grant-offers-1'><span id=a-name-grant-offers-a-grant-offers></span><a name="grant-offers"></a> Grant offers</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers/grant"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "offers": [
                {
                    "id": 47,
                    "audience_id": 572,
                    "usable_for_seconds": 60
                },
                {
                    "id": 49,
                    "audience_id": 572,
                }
            ]
        }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/offers/grant</code></p>

<p>Grants offer(s) to members of given audience(s).</p>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers[].id</td>
<td>integer</td>
<td>ID of offer to grant</td>
</tr>
<tr>
<td>offers[].audience_id</td>
<td>integer</td>
<td>ID of audience which members should be granted with the offer</td>
</tr>
<tr>
<td>offers[].usable_for_seconds</td>
<td>integer</td>
<td>(optional) When present, the granted offer will be available for use by member only for the defined time</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Grant</code> permit
</aside>
<h3 id='a-name-update-offers-a-delete-offers-1'><span id=a-name-update-offers-a-delete-offers></span><a name="update-offers"></a> Delete offers</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "ids":[1000284, 1000285]
        }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>DELETE</strong> <code>v3/:loyalty_club_slug/offers</code></p>

<p>Deletes given offers (by their IDs).</p>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>List of offers ids to delete</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Destroy</code> permit
</aside>
