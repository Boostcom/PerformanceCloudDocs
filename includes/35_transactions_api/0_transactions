<h1 id='transactions-api-1'><span id=transactions-api></span>Transactions API</h1><h2 id='transactions-1'><span id=transactions></span>Transactions</h2><h3 id='a-name-transactions-create-a-create-1'><span id=a-name-transactions-create-a-create></span><a name="transactions-create"></a> Create</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/:loyalty_club_slug/transactions"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
         "transactions": [
             {
                 "identifier_type": "id",
                 "identifier": 123456,
                 "store_id": "store_id",
                 "event_date": "2019-02-02T18:48:47+08:00",
                 "total": 10.0,
                 "receipt_id": "receipt id",
                 "tax": 1.0,
                 "currency": "NOK",
                 "items": [
                     {
                         "id": "1",
                         "discount": 0.0,
                         "tax": 1,
                         "amount": 1,
                         "price": 5.0,
                         "main_product_category": "category name",
                         "main_product_category_id": "category id",
                         "main_product_category_number": "1",
                         "product_category": "category name",
                         "product_category_id": "category id",
                         "product_category_number": "1",
                         "description": "item description"
                     },
                     {
                         "id": "2",
                         "discount": 0.0,
                         "tax": 1.0,
                         "amount": 1,
                         "price": 5,
                         "main_product_category": "category name",
                         "main_product_category_id": "category id"
                     }
                 ],
                 "loyalty_points": 100
             }
         ],
         "callback_url": "https://callback.url"
     }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"91cd14a0-b9b5-4e21-950c-a10b16934a91"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1ad96fb7-fb77-4981-b2a6-89549a6f5ed6"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4c2b7a6-e0fb-47a3-9b5a-02d3854fcea3"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"5a8fd797-ba18-4c9c-9d70-c7acdd7805b6"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bc20e6a6-4792-4c94-8c30-4198bf8247c5"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Member doesn't exist"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"transactions[1].store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This value should not be blank."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/:loyalty_club_slug/transactions?transaction_id=43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an array of transactions objects structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receipt id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-02T02:02:02+0000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sales_person"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales person"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"transactions[1].store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This value should not be blank."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/transactions</code></p>

<p>Register transactions, stamps or bonus points will be calculated based on the configured loyalty program.</p>
<h4 id='messages-post-parameters-json-array-1'><span id=messages-post-parameters-json-array></span>Messages POST Parameters (JSON array)</h4>
<p>Expected payload is either object with <code>transactions</code> attribute containing array of <code>transaction</code> objects with attributes as described below or single <code>transaction</code> object:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>identifier_type *</td>
<td>string (id, msisdn, email)</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>identifier *</td>
<td>msisdn (string), email (string), member_id (int)</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>store_id *</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>receipt_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>event_date *</td>
<td>string</td>
<td>use format with timezone</td>
<td></td>
</tr>
<tr>
<td>total *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>tax *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>items *</td>
<td>array</td>
<td>n/a</td>
<td>array of <code>item</code> objects</td>
</tr>
<tr>
<td>calculate_rewards</td>
<td>bool</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Loyalty Club&#39;s currency</td>
<td></td>
</tr>
<tr>
<td>sales_person</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>terminal_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>store_tax_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>store_msisdn</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>loyalty_coupons</td>
<td>array of strings</td>
<td>n/a</td>
<td>list of coupons ids / codes</td>
</tr>
<tr>
<td>loyalty_giftcards</td>
<td>array of strings</td>
<td>n/a</td>
<td>list of codes</td>
</tr>
<tr>
<td>loyalty_points</td>
<td>integer</td>
<td>n/a</td>
<td></td>
</tr>
</tbody></table>

<p>* required</p>

<p><code>item</code> object is a hash with following attributes:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id *</td>
<td>string</td>
<td>n/a</td>
<td>item id</td>
</tr>
<tr>
<td>price *</td>
<td>float</td>
<td>n/a</td>
<td>negative values will be treated as discounts</td>
</tr>
<tr>
<td>amount *</td>
<td>integer</td>
<td>n/a</td>
<td>negative values will be treated as refunds</td>
</tr>
<tr>
<td>discount *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>tax *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>calculate_rewards *</td>
<td>bool</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>item_number</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>properties</td>
<td>hash key: value</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>product_category</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>product_category_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>product_category_number</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>main_product_category</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>main_product_category_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>main_product_category_number</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
</tbody></table>

<p>* required</p>

<p>Negative price and amount will result in error.</p>

<p>You can provide <code>callback_url</code> in the root object. If it&#39;s available after processing we will send <code>POST</code> request to that URL with body as below:
<code>
{
    &quot;transaction_id&quot;: &quot;UUID&quot;,
    &quot;receipt_id&quot;: &quot;id&quot;,
    &quot;items&quot;: [&quot;UUID&quot;, &quot;UUID&quot;],
    &quot;result&quot; =&gt; &quot;OK|error message&quot;
}
</code></p>
<h4 id='feedback-statuses-1'><span id=feedback-statuses></span>Feedback statuses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Message has been accepted for sending</td>
</tr>
<tr>
<td>Member doesn&#39;t exist</td>
<td></td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Create</code> and <code>BL:Api:Members:Get</code> permits
</aside>
<h3 id='a-name-transactions-list-a-list-1'><span id=a-name-transactions-list-a-list></span><a name="transactions-list"></a> List</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/:loyalty_club_slug/transactions?transaction_id=43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an array of transactions objects structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receipt id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-02T02:02:02+0000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sales_person"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales person"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terminal id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_tax_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store tax id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_msisdn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msisdn"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When parameters are invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"At least one value required: {{ transactionId, storeId, receiptId, memberId, salesPerson, currency }}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/transactions</code></p>

<p>List registered transactions</p>
<h4 id='request-parameters-1'><span id=request-parameters></span>Request Parameters</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>store_id *</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>receipt_id *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>member_id *</td>
<td>int</td>
<td></td>
</tr>
<tr>
<td>sales_person *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>currency *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>ignore_loyalty</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>min_total_gross</td>
<td>float</td>
<td></td>
</tr>
<tr>
<td>max_total_gross</td>
<td>float</td>
<td></td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>field to sort by</td>
</tr>
<tr>
<td>order</td>
<td>string (ASC, DESC)</td>
<td></td>
</tr>
</tbody></table>

<p>* required at least one of starred parameters </p>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Get</code> permit
</aside> 
<h3 id='a-name-transactions-get-a-get-1'><span id=a-name-transactions-get-a-get></span><a name="transactions-get"></a> Get</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/:loyalty_club_slug/transactions/43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns transactions object structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
  </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receipt id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"event_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-02T02:02:02+0000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sales_person"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales person"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terminal id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"store_tax_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store tax id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"store_msisdn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msisdn"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_category_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"category id"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_category_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Category"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When <code>transaction_id</code> is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transaction not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/transactions/:id</code></p>

<p>Get transaction with items</p>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Get</code> permit
</aside> 
<h2 id='categories-1'><span id=categories></span>Categories</h2><h3 id='a-name-transactions-categories-get-a-list-1'><span id=a-name-transactions-categories-get-a-list></span><a name="transactions-categories-get"></a> List</h3>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/:loyalty_club_slug/transactions/categories"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns categories objects structured like below:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2276bb58-45a4-4d49-b25b-896a78b06730"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"category"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13b2a321-280e-48fc-bf18-54b61dc6d577"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subcategory"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2276bb58-45a4-4d49-b25b-896a78b06730"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19c3f19c-f090-43f1-8439-824406449a2e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13b2a321-280e-48fc-bf18-54b61dc6d577"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When parameters are invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The value you selected is not a valid choice."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This value should be of type array."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v3/:loyalty_club_slug/transactions/categories</code></p>

<p>Get categories</p>
<h4 id='request-parameters-1'><span id=request-parameters></span>Request Parameters</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string (main, sub, item)</td>
<td></td>
</tr>
<tr>
<td>parent_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>100</td>
</tr>
<tr>
<td>id</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Get</code> permit
</aside> 
<h2 id='events-1'><span id=events></span>Events</h2><h3 id='a-name-transactions-events-create-a-create-events-1'><span id=a-name-transactions-events-create-a-create-events></span><a name="transactions-events-create"></a> Create events</h3>
<blockquote>
<p>Example:</p>

<p>e-Vouchers</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/:loyalty_club_slug/transactions/events"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> 
    -d <span class="se">\</span>
    <span class="s1">'{
        { 
          "type": "use_evoucher",
          "bulk":
            [
                {
                    "identifier": 1,
                    "identifier_type": "id",
                    "event_date": "2019-09-11T12:00:00+01:00",
                    "voucher_id": 1,
                    "store_id": "8",
                    "voucher_name": "name",
                    "serial_number": "serial_number"
                },
                {
                    "identifier": 2,
                    "identifier_type": "id",
                    "event_date": "2019-09-11T12:00:00+01:00",
                    "voucher_id": 2,
                    "store_id": "8",
                    "voucher_name": "name",
                    "serial_number": "serial_number"
                },
                {
                    "identifier": 3,
                    "identifier_type": "id",
                    "event_date": "2019-09-11T12:00:00+01:00",
                    "voucher_id": 3,
                    "store_id": "8",
                    "voucher_name": "name",
                    "serial_number": "serial_number"
                }
            ]
        }
    }'</span>
</code></pre>
<blockquote>
<p>GWP</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v3/:loyalty_club_slug/transactions/categories"</span> <span class="se">\</span>
    -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
    -H <span class="s1">'x-user-agent: CURL manual test'</span> 
    -d <span class="se">\</span>
    <span class="s1">'{
        { 
          "type": "redeem_gwp",
          "bulk":
            [
                {
                    "identifier": 44837522,
                    "identifier_type": "id",
                    "event_date": "2019-09-11T12:00:00+01:00",
                    "campaign_id": 1,
                    "item_id": "8",
                    "campaign_name": "campaign_name",
                    "item_name": "item_name",
                    "serial_number": "serial_number",
                    "detail_id": "detail_id",
                    "quantity": 1
                },
                {
                    "identifier": 44837522,
                    "identifier_type": "id",
                    "event_date": "2019-09-11T12:00:00+01:00",
                    "campaign_id": 1,
                    "item_id": "8",
                    "campaign_name": "campaign_name",
                    "item_name": "item_name",
                    "serial_number": "serial_number",
                    "detail_id": "detail_id",
                    "quantity": 1
                },
                {
                    "identifier": 44837522,
                    "identifier_type": "id",
                    "event_date": "2019-09-11T12:00:00+01:00",
                    "campaign_id": 1,
                    "item_id": "8",
                    "campaign_name": "campaign_name",
                    "item_name": "item_name",
                    "serial_number": "serial_number",
                    "detail_id": "detail_id",
                    "quantity": 1,
                    "additional_properties": 
                    {
                        "property_name": "property_value"
                    }                    
                }
            ]
        }
    }'</span>
</code></pre>
<blockquote>
<p>When successful (200), result is ok for every event:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"event_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4cca1661-7647-4a48-9664-a68b2075451d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"event_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c3506406-b89e-4aef-8b33-c19aceb8ad6c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"event_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eed0173c-a51d-4afb-a819-0320fabf77e9"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"[0].store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property store_id is required"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"[0].voucher_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property voucher_id is required"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"[1].voucher_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property voucher_name is required"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"[1].serial_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property serial_number is required"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v3/:loyalty_club_slug/transactions/events</code></p>

<p>Send different bonus events events</p>
<h4 id='request-parameters-1'><span id=request-parameters></span>Request Parameters</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>type of events (redeem_gwp, use_evoucher)</td>
</tr>
<tr>
<td>bulk</td>
<td>array</td>
<td>array of event objects</td>
</tr>
</tbody></table>

<p>Bulk contains many events of specified type.</p>

<p>e-Vouchers event</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>identifier</td>
<td>string</td>
<td>Member identifier</td>
</tr>
<tr>
<td>identifier_type</td>
<td>string</td>
<td>Member identifier type (id, msisdn, email)</td>
</tr>
<tr>
<td>event_date</td>
<td>string</td>
<td>datetime formatted according to ISO 8601, <strong>use timezone</strong></td>
</tr>
<tr>
<td>voucher_id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>store_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>voucher_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>serial_number</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<p>GWP event</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>identifier</td>
<td>string,integer</td>
<td>Member identifier</td>
</tr>
<tr>
<td>identifier_type</td>
<td>string</td>
<td>Member identifier type (id, msisdn, email)</td>
</tr>
<tr>
<td>event_date</td>
<td>string</td>
<td>datetime formatted according to ISO 8601, <strong>use timezone</strong></td>
</tr>
<tr>
<td>campaign_id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>campaign_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>item_id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>item_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>serial_number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>detail_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>additional_properties</td>
<td>object</td>
<td></td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Events:Create</code> permit
</aside> 
