<h1 id="operations-admin-api"><a name="operations-admin"></a> Operations Admin API</h1>

<h2 id="common-models"><a name="operations-admin-models"></a> Common models</h2>

<h3 id="document"><a name="operations-admin-document-model"></a> Document</h3>

<blockquote>
<p>Document example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fire instructions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deadline_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-15T15:43:32.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message_channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_reminder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"days_before_deadline"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"scheduled_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-10T08:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sent_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"second_reminder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"days_before_deadline"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"scheduled_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-13T08:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sent_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-30T17:12:46.435Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-30T17:12:46.435Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recipients_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recipients_confirmation_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The document is an entity that has some files (with <code class="prettyprint">type: &quot;document&quot;</code> and Document&rsquo;s ID as <code class="prettyprint">identifier</code>) attached to it. </p>

<p>Upon creation, a notification containing the document is sent via specified channel to given recipients (members of Tenant community). </p>

<p>When document is <code class="prettyprint">confirmable</code>, recipients may need to confirm it. In such case, a <code class="prettyprint">deadline_at</code> must be specified.
Also, it is possible to configure automated <a href="#operations-admin-document-reminder-model">reminder</a> messages that
are sent to recipients which didn&rsquo;t confirm the document.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>confirmable</td>
<td>boolean</td>
<td>no</td>
<td>Is document meant to be confirmed by recipients?</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>deadline_at</td>
<td>datetime</td>
<td>when not confirmable</td>
<td>Time until document is meant to be confirmed by recipients - only for <code class="prettyprint">confirmable</code> documents</td>
</tr>
<tr>
<td>message_channel</td>
<td>enum: <code class="prettyprint">[&#39;sms&#39;, &#39;email&#39;, &#39;push&#39;]</code></td>
<td>no</td>
<td>Channel that the document (and reminders) should be sent with</td>
</tr>
<tr>
<td>first_reminder</td>
<td><a href="#operations-admin-document-reminder-model">DocumentReminder</a></td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>second_reminder</td>
<td><a href="#operations-admin-document-reminder-model">DocumentReminder</a></td>
<td>yes</td>
<td>Can only be specified after the first reminder</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>no</td>
<td>Time of creation</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>no</td>
<td>Time of last update</td>
</tr>
<tr>
<td>recipients_count</td>
<td>integer</td>
<td>no</td>
<td>Number of recipients</td>
</tr>
<tr>
<td>recipients_confirmation_status</td>
<td>enum: <code class="prettyprint">[&#39;all&#39;, &#39;some&#39;, &#39;none&#39;]</code></td>
<td>no</td>
<td>Describes how many recipients have confirmed the document</td>
</tr>
</tbody></table>

<h4 id="documentreminder-model"><a name="operations-admin-document-reminder-model"></a> DocumentReminder model</h4>

<blockquote>
<p>Document reminder example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"days_before_deadline"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scheduled_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-13T08:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sent_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-13T08:00:01.540Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>days_before_deadline</td>
<td>integer</td>
<td>no</td>
<td>When the reminder should be sent - number of days before the specified deadline</td>
</tr>
<tr>
<td>scheduled_at</td>
<td>datetime</td>
<td>no</td>
<td>Actual calculated time for reminder sending - at 09:00 in the timezone specific for the Loyalty Club</td>
</tr>
<tr>
<td>sent_at</td>
<td>datetime</td>
<td>yes</td>
<td>When the reminder has been sent</td>
</tr>
</tbody></table>

<h3 id="documentrecipient-model"><a name="operations-admin-document-recipient-model"></a> DocumentRecipient model</h3>

<blockquote>
<p>DocumentRecipient example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">44</span><span class="p">,</span><span class="w">
    </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">52</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_seen_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-30T17:21:42.350Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-30T17:21:50.420Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-30T16:46:28.200Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-11-30T16:46:28.200Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>member_id</td>
<td>integer</td>
<td>no</td>
<td>ID of MPC member</td>
</tr>
<tr>
<td>last_seen_at</td>
<td>datetime</td>
<td>yes</td>
<td>Last time when the recipient retrieved the Document record</td>
</tr>
<tr>
<td>confirmed_at</td>
<td>datetime</td>
<td>yes</td>
<td>Time of confirmation</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>no</td>
<td>Time of creation</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>no</td>
<td>Time of last update</td>
</tr>
</tbody></table>
