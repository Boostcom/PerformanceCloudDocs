<h2 id='a-name-operations-admin-resources-a-resources-1'><span id=a-name-operations-admin-resources-a-resources></span><a name="operations-admin-resources"></a> Resources</h2><h3 id='a-name-operations-admin-resource-model-a-resource-model-1'><span id=a-name-operations-admin-resource-model-a-resource-model></span><a name="operations-admin-resource-model"></a> Resource model</h3>
<blockquote>
<p>Resource example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resource_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some resource type"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-user-uuid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a very important document"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"marketing_usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"file_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some.file/url"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"campaign_name"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"November"</span><span class="p">,</span><span class="w"> </span><span class="s2">"October"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"used_so_far"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"campaign_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some campaign type"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some notes about the resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-30T17:12:46.435Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-12-30T17:12:50.235Z"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A resource is an entity that has a file attached to it. It comprises of a name, details (listed above) and a custom attribute list that matches its resource type attributes.
As an admin, one can list, accept and reject resources submitted by users.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>resource_type</td>
<td>string</td>
<td>no</td>
<td>name of the ResourceType the resource is assigned to</td>
</tr>
<tr>
<td>store_id</td>
<td>integer</td>
<td>no</td>
<td>.id of the Store the resource is assigned to</td>
</tr>
<tr>
<td>member_id</td>
<td>integer</td>
<td>no</td>
<td>.member_id of the User the resource has been created by</td>
</tr>
<tr>
<td>user_id</td>
<td>string</td>
<td>no</td>
<td>uuid of the User the resource has been created by</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>no</td>
<td>name of the resource</td>
</tr>
<tr>
<td>marketing_usable</td>
<td>boolean</td>
<td>no</td>
<td>whether the resource will be allowed to be used for marketing purposes</td>
</tr>
<tr>
<td>file_url</td>
<td>string</td>
<td>no</td>
<td>URL of the file where the resource is located at</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>no</td>
<td>current state of the resource (could be <code>pending</code> (the default one), <code>accepted</code> or <code>rejected</code>)</td>
</tr>
<tr>
<td>properties</td>
<td>object</td>
<td>yes</td>
<td>custom attributes of the resource</td>
</tr>
<tr>
<td>campaign_type</td>
<td>string</td>
<td>yes</td>
<td>campaign type of the resource</td>
</tr>
<tr>
<td>notes</td>
<td>string</td>
<td>yes</td>
<td>notes about the resource - used to provide a reason for its acceptance/rejection/resubmission</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>no</td>
<td>time of creation</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>no</td>
<td>time of last update</td>
</tr>
</tbody></table>
<h3 id='a-name-operations-admin-list-resources-a-list-resources-1'><span id=a-name-operations-admin-list-resources-a-list-resources></span><a name="operations-admin-list-resources"></a> List Resources</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/operations/resources"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'x-b-store-id: 2'</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Returns object containing <a href="#operations-admin-resource-model">resources</a> and <a href="#pagination-model">pagination_info</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">List</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">resources</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Resource</span><span class="w"> </span><span class="err">model'</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Pagination</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Pagination</span><span class="w"> </span><span class="err">info'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v1/operations/resources</code></p>

<p>Returns list of <a href="#operations-admin-resource-model">Resources</a>.</p>
<h4 id='query-parameters-1'><span id=query-parameters></span>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>100</td>
<td>Number of results to be returned per request (100 is the maximum)</td>
</tr>
<tr>
<td>page_no</td>
<td>integer</td>
<td>1</td>
<td>Number of results page</td>
</tr>
<tr>
<td>search_query</td>
<td>string</td>
<td>null</td>
<td>If provided, only Resources that have any of their attribute values matching the provided string are returned</td>
</tr>
<tr>
<td>resource_type</td>
<td>string</td>
<td>null</td>
<td>If provided, only Resources that belong to the resource type of provided name are returned</td>
</tr>
<tr>
<td>campaign_type</td>
<td>array[string]</td>
<td>null</td>
<td>If provided, only Resources with the provided campaign types are returned</td>
</tr>
<tr>
<td>store_id</td>
<td>integer</td>
<td>null</td>
<td>If provided, only Resources that belong to the store of provided id are returned</td>
</tr>
<tr>
<td>member_id</td>
<td>integer</td>
<td>null</td>
<td>If provided, only Resources that belong to the member of provided id are returned</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Operations:Api:Resources:List</code> permit
</aside>
<h3 id='a-name-operations-admin-show-resource-a-get-resource-1'><span id=a-name-operations-admin-show-resource-a-get-resource></span><a name="operations-admin-show-resource"></a> Get Resource</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/operations/resources/5"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'x-b-store-id: 2'</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Returns object containing <a href="#operations-admin-resource-model">resource</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">see</span><span class="p">:</span><span class="w"> </span><span class="err">'Resource</span><span class="w"> </span><span class="err">model'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v1/operations/resources/:id</code></p>

<p>Returns given <a href="#operations-admin-resource-model">Resource</a>.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Resource ID</td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>404</code></td>
<td>Resource not found</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Operations:Api:Resources:Show</code> permit
</aside>
<h3 id='a-name-operations-show-resource-a-accept-resource-1'><span id=a-name-operations-show-resource-a-accept-resource></span><a name="operations-show-resource"></a> Accept Resource</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/operations/resources/5/accept"</span> <span class="se">\</span>
  -H <span class="s1">'authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyOE'</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'x-b-store-id: 2'</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Returns object containing <a href="#operations-resource-model">resource</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">see</span><span class="p">:</span><span class="w"> </span><span class="err">'Resource</span><span class="w"> </span><span class="err">model'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code>v1/operations/resources/:id/accept</code></p>

<p>Accepts given <a href="#operations-resource-model">Resource</a>.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Resource ID</td>
</tr>
<tr>
<td>notes</td>
<td>string</td>
<td>Notes (thoughts) about the resource - will be visible to the author</td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>404</code></td>
<td>Resource not found</td>
</tr>
<tr>
<td><code>405</code></td>
<td>Resource is not accepttable</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Operations:Api:Resources:Accept</code> accept
</aside>
<h3 id='a-name-operations-show-resource-a-reject-resource-1'><span id=a-name-operations-show-resource-a-reject-resource></span><a name="operations-show-resource"></a> Reject Resource</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/operations/resources/5/reject"</span> <span class="se">\</span>
  -H <span class="s1">'authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyOE'</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'x-b-store-id: 2'</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Returns object containing <a href="#operations-resource-model">resource</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">see</span><span class="p">:</span><span class="w"> </span><span class="err">'Resource</span><span class="w"> </span><span class="err">model'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code>v1/operations/resources/:id/reject</code></p>

<p>Rejects given <a href="#operations-resource-model">Resource</a>.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Resource ID</td>
</tr>
<tr>
<td>notes</td>
<td>string</td>
<td>Notes (thoughts) about the resource - will be visible to the author</td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>404</code></td>
<td>Resource not found</td>
</tr>
<tr>
<td><code>405</code></td>
<td>Resource is not rejecttable</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Operations:Api:Resources:Reject</code> reject
</aside>
