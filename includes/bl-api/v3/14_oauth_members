<h1 id="endpoints-me">Endpoints &bull; Me</h1>

<h2 id="introduction"><a name="v3-oauth2"></a> Introduction</h2>

<blockquote>
<p>Example header: <code class="prettyprint">Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522</code></p>
</blockquote>

<p>Actions related to specific member (the one that is using your application) require to have member authenticated and we implement
OAuth2 flow for this.</p>

<p>To authorize those actions, we <strong>require</strong> <code class="prettyprint">Authorization</code> header that should contain: <code class="prettyprint">Bearer :access_token</code>. </p>

<p>Look at <a href="#v3-token-create">OAuth Token &bull; Create</a> to see how to obtain the :access_token.</p>

<h2 id="get"><a name="v3-me-get"></a> Get</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span>
</code></pre>
<blockquote>
<p>Responses as same as in <a href="#v3-members-get">Members &bull; Get</a></p>
</blockquote>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me</code></p>

<p>Returns &ldquo;current&rdquo; member - the one that given Authorization token has been issued for.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>See: <a href="#v3-member-model">Member model</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:Get</code> permit.
</aside>

<h2 id="update"><a name="v3-me-update"></a> Update</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/me <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
      "properties": {
          "last_name": "Doge"
      },
      "password": "new_password"
  }'</span>
</code></pre>
<blockquote>
<p>Responses are same as in <a href="#v3-members-update">Members &bull; Update</a></p>
</blockquote>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me</code></p>

<p>Updates &ldquo;current&rdquo; member - the one that given Authorization token has been issued for.
As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<p>Besides that OAuth context, it works exactly the same as <a href="#v3-members-update">Members &bull; Update</a>. </p>

<h3 id="parameters">Parameters</h3>

<p>It accepts same PUT and URL parameters as in <a href="#v3-members-update">Members &bull; Update</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Same as in <a href="#v3-members-update">Members &bull; Update</a>.</p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><a href="#validation-on-members">Validation errors</a> JSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:Update</code> permit.
</aside>

<h2 id="update-password"><a name="v3-me-update-password"></a> Update password</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/me/update_password <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
      "current_password": "123"
      "password": "SuperStrongP4ssw0rd"
  }'</span>
</code></pre>
<blockquote>
<p>Always returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/update_password</code></p>

<p>Updates &ldquo;current&rdquo; member (the one that given Authorization token has been issued for) password.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<p>In opposition to <a href="#v3-me-update">Me &bull; Update</a>, it does not validate current user data, only given password.</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>Member&rsquo;s new password</td>
<td>string</td>
</tr>
<tr>
<td>current_password</td>
<td>Member&rsquo;s current password</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid password - returns <a href="#validation-on-members">validation errors</a> JSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
<tr>
<td><code class="prettyprint">464</code></td>
<td>Invalid current_password</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:UpdatePassword</code> permit.
</aside>

<h2 id="update-app-token"><a name="v3-me-update-app-token"></a> Update app token</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/me/update_app_token <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
     "app_token": "tok3n",
     "app_platform": "android"
   }'</span>
</code></pre>
<blockquote>
<p>When successful, returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid, returns error response (422). See <a href="#v3-members-update-app-token">Members &bull; Update app token</a></p>
</blockquote>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me/update_app_token</code></p>

<p>Behaves like <a href="#v3-members-update-app-token">Members &bull; Update app token</a></p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="put-parameters-json">PUT Parameters (JSON)</h3>

<p>See <a href="#v3-members-update-app-token">Members &bull; Update app token</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:UpdateAppToken</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="destroy"><a name="v3-me-destroy"></a> Destroy</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
    <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Response as same as in <a href="#v3-members-destroy">Members &bull; Destroy</a></p>
</blockquote>

<p><strong>DELETE</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me</code></p>

<p>Permanently removes &ldquo;current&rdquo; member - the one that given Authorization token has been issued for.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="parameters">Parameters</h3>

<p>It accepts same URL &amp; query parameters as in <a href="#v3-members-destroy">Members &bull; Destroy</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Same as in <a href="#v3-members-destroy">Members &bull; Destroy</a>.</p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:Destroy</code> permit.
</aside>
